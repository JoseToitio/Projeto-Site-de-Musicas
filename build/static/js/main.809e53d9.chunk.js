(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{29:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),c=n(23),i=n.n(c),s=(n(29),n(3)),o=n(4),u=n(6),l=n(5),d=n(2),b=n(16),j=n(7),h=n.n(j),O=n(10),p=n(9),f=n(14),v=n(18),m="user",x=function(t){return localStorage.setItem(m,JSON.stringify(t))},g=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},k=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(m));null===e&&(e={}),g(e)(t)}))},y=function(t){return new Promise((function(e){x(Object(v.a)(Object(v.a)({},{name:"",email:"",image:"",description:""}),t)),g("OK")(e)}))},C=n(0),S=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(C.jsx)("div",{children:"Carregando..."})}}]),n}(r.a.Component),N=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={user:"",render:!1},t.getUserAPI=t.getUserAPI.bind(Object(p.a)(t)),t.loadUser=t.loadUser.bind(Object(p.a)(t)),t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getUserAPI()}},{key:"getUserAPI",value:function(){var t=this;this.setState({render:!0},Object(O.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:n=e.sent,t.setState({user:n.name,render:!1});case 4:case"end":return e.stop()}}),e)}))))}},{key:"loadUser",value:function(){var t=this.state.user;return Object(C.jsx)("span",{"data-testid":"header-user-name",children:"Usuario: ".concat(t)})}},{key:"render",value:function(){var t=this.state.render;return Object(C.jsxs)("header",{"data-testid":"header-component",className:"header",children:[t?Object(C.jsx)(S,{}):this.loadUser(),Object(C.jsx)(f.b,{to:"/search","data-testid":"link-to-search",children:"Search"}),Object(C.jsx)(f.b,{to:"/album/:id",children:"Album"}),Object(C.jsx)(f.b,{to:"/favorites","data-testid":"link-to-favorites",children:"Favoritos"}),Object(C.jsx)(f.b,{to:"/profile","data-testid":"link-to-profile",children:"Profile"}),Object(C.jsx)(f.b,{to:"/profile/edit",children:"Profile Edit"})]})}}]),n}(r.a.Component),w=function(){var t=Object(O.a)(h.a.mark((function t(e){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props,e=t.previewUrl,n=t.name,a=t.trackId,r=t.saveFavorite,c=t.favorites;return Object(C.jsx)("div",{children:Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{children:"".concat(n)}),Object(C.jsxs)("audio",{"data-testid":"audio-component",src:e,controls:!0,children:[Object(C.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento.",Object(C.jsx)("code",{children:"audio"})]}),Object(C.jsxs)("label",{htmlFor:a,children:["Favorita",Object(C.jsx)("input",{type:"checkbox",id:a,"data-testid":"checkbox-music-".concat(a),checked:c,onChange:r})]})]})})}}]),n}(r.a.Component),A="favorite_songs";JSON.parse(localStorage.getItem(A))||localStorage.setItem(A,JSON.stringify([]));var P=function(){return JSON.parse(localStorage.getItem(A))},U=function(t){return localStorage.setItem(A,JSON.stringify(t))},F=function(t){return function(e){setTimeout((function(){e(t)}),500)}},M=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={albumMusics:"",artistName:"",allAlbums:[],loading:!0,songsLike:[]},t.getMusicsAlbum=t.getMusicsAlbum.bind(Object(p.a)(t)),t.saveFavorite=t.saveFavorite.bind(Object(p.a)(t)),t.loadingPage=t.loadingPage.bind(Object(p.a)(t)),t.getFavoriteSongs=t.getFavoriteSongs.bind(Object(p.a)(t)),t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.id;this.getMusicsAlbum(t),this.getFavoriteSongs()}},{key:"getMusicsAlbum",value:function(){var t=Object(O.a)(h.a.mark((function t(e){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:n=t.sent,a=n.find((function(t){return t.artistName})),this.setState({albumMusics:a.collectionName,artistName:a.artistName,allAlbums:n.filter((function(t){return void 0!==t.trackId})),loading:!1});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getFavoriteSongs",value:function(){var t=Object(O.a)(h.a.mark((function t(){var e=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){var e=P();F(e)(t)})).then((function(t){return e.setState((function(e){var n=e.songsLike;return{songsLike:[].concat(Object(b.a)(n),Object(b.a)(t))}}))}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"saveFavorite",value:function(t){var e=this,n=t.target,a=this.state.allAlbums;this.loadingPage();var r,c=a.find((function(t){return t.trackId===Number(n.id)}));(r=a,new Promise((function(t){if(r){var e=P();U([].concat(Object(b.a)(e),[r]))}F("OK")(t)}))).then((function(){e.setState((function(t){var e=t.songsLike;return{loading:!1,songsLike:[].concat(Object(b.a)(e),[c])}}))}))}},{key:"loadingPage",value:function(){this.setState((function(t){return{loading:!t.loading}}))}},{key:"render",value:function(){var t=this,e=this.state,n=e.albumMusics,a=e.artistName,r=e.allAlbums,c=e.loading,i=e.songsLike,s=Object(C.jsx)("p",{"data-testid":"artist-name",children:"".concat(a)}),o=Object(C.jsx)("p",{"data-testid":"album-name",children:"".concat(n)});return Object(C.jsxs)("div",{children:[Object(C.jsx)(N,{}),Object(C.jsxs)("div",{children:[s,o]}),Object(C.jsxs)("div",{"data-testid":"page-album",children:[c&&Object(C.jsx)(S,{}),Object(C.jsx)("div",{className:"track",children:!c&&r.map((function(e){return Object(C.jsx)(I,{previewUrl:e.previewUrl,name:e.trackName,trackId:e.trackId,saveFavorite:t.saveFavorite,favorites:i.some((function(t){return t.trackId===e.trackId}))},e.trackId)}))})]})]})}}]),n}(r.a.Component),B=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(C.jsx)("div",{"data-testid":"page-favorites",children:Object(C.jsx)(N,{})})}}]),n}(r.a.Component),J=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={user:"",loading:!1,reloading:!1},t.handleChange=t.handleChange.bind(Object(p.a)(t)),t.disableButton=t.disableButton.bind(Object(p.a)(t)),t.clickButton=t.clickButton.bind(Object(p.a)(t)),t}return Object(o.a)(n,[{key:"handleChange",value:function(t){var e=t.target;this.setState({user:e.value})}},{key:"disableButton",value:function(){return!(this.state.user.length>=3)}},{key:"clickButton",value:function(){var t=Object(O.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.user,this.setState({loading:!0}),t.next=4,y({name:e});case 4:this.setState((function(){return{loading:!1,reloading:!0}}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state,n=e.reloading,a=e.loading;return Object(C.jsxs)("div",{"data-testid":"page-login",children:[Object(C.jsxs)("form",{children:[Object(C.jsx)("input",{type:"text",name:"nome",placeholder:"Digite seu nome","data-testid":"login-name-input",onChange:this.handleChange}),Object(C.jsx)("button",{type:"button","data-testid":"login-submit-button",disabled:this.disableButton(),onClick:function(){return t.clickButton()},children:"Entrar"})]}),n&&Object(C.jsx)(d.a,{to:"/search"}),a&&Object(C.jsx)(S,{})]})}}]),n}(r.a.Component),L=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(C.jsx)("div",{"data-testid":"page-not-found",children:" "})}}]),n}(r.a.Component),D=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(C.jsx)("div",{"data-testid":"page-profile",children:Object(C.jsx)(N,{})})}}]),n}(r.a.Component),T=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(C.jsx)("div",{"data-testid":"page-profile-edit",children:Object(C.jsx)(N,{})})}}]),n}(r.a.Component),E=function(){var t=Object(O.a)(h.a.mark((function t(e){var n,a,r,c,i,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return r=t.sent,t.next=7,r.json();case 7:return c=t.sent,i=c.results,s=i.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={nameArtist:"",render:!1,albums:[],saveNameArtist:""},t.handleChange=t.handleChange.bind(Object(p.a)(t)),t.handleClick=t.handleClick.bind(Object(p.a)(t)),t}return Object(o.a)(n,[{key:"handleChange",value:function(t){var e=t.target;this.setState({nameArtist:e.value})}},{key:"handleClick",value:function(){var t=Object(O.a)(h.a.mark((function t(){var e,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.nameArtist,this.setState({render:!0,saveNameArtist:e}),t.next=4,E(e);case 4:n=t.sent,this.setState({nameArtist:"",render:!1,albums:n.map((function(t){return t}))});case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state,n=e.nameArtist,a=e.render,r=e.albums,c=e.saveNameArtist;return Object(C.jsxs)("div",{"data-testid":"page-search",children:[Object(C.jsx)(N,{}),Object(C.jsxs)("form",{children:[Object(C.jsx)("input",{type:"text",name:"find",value:n,"data-testid":"search-artist-input",onChange:this.handleChange}),Object(C.jsx)("button",{type:"button",disabled:n.length<2,"data-testid":"search-artist-button",onClick:function(){return t.handleClick()},children:"Pesquisar"})]}),Object(C.jsxs)("div",{children:[a&&Object(C.jsx)(S,{}),r.length>0?Object(C.jsx)("p",{children:"Resultado de \xe1lbuns de: ".concat(c)}):Object(C.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"})]}),Object(C.jsx)("div",{className:"super-div",children:!a&&r.map((function(t,e){return Object(C.jsx)("div",{className:"div-albums",children:Object(C.jsxs)("div",{className:"div-items",children:[Object(C.jsx)(f.b,{to:"/album/".concat(t.collectionId),"data-testid":"link-to-album-".concat(t.collectionId),children:Object(C.jsx)("p",{children:t.artistName})}),Object(C.jsx)("p",{children:t.collectionName}),Object(C.jsx)("img",{src:t.artworkUrl100,alt:t.artistName})]})},e)}))})]})}}]),n}(r.a.Component),R=(n(40),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{children:"TrybeTunes"}),Object(C.jsxs)(d.d,{children:[Object(C.jsx)(d.b,{exact:!0,path:"/",component:J}),Object(C.jsx)(d.b,{exact:!0,path:"/search",component:K}),Object(C.jsx)(d.b,{exact:!0,path:"/album/:id",component:M}),Object(C.jsx)(d.b,{exact:!0,path:"/favorites",component:B}),Object(C.jsx)(d.b,{exact:!0,path:"/profile",component:D}),Object(C.jsx)(d.b,{exact:!0,path:"/profile/edit",component:T}),Object(C.jsx)(d.b,{exact:!0,path:"*",component:L})]})]})}}]),n}(r.a.Component));i.a.render(Object(C.jsx)(f.a,{basename:"/Projeto-Site-de-Musicas",children:Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(R,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.809e53d9.chunk.js.map